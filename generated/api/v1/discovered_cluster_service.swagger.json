{
  "swagger": "2.0",
  "info": {
    "title": "api/v1/discovered_cluster_service.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "DiscoveredClustersService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/count/discovered-clusters": {
      "get": {
        "summary": "CountDiscoveredClusters returns the number of discovered clusters after filtering by requested fields.",
        "operationId": "DiscoveredClustersService_CountDiscoveredClusters",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1CountDiscoveredClustersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "filter.names",
            "description": "Matches discovered clusters of specific names.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.types",
            "description": "Matches discovered clusters of specific types.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "UNSPECIFIED",
                "AKS",
                "ARO",
                "EKS",
                "GKE",
                "OCP",
                "OSD",
                "ROSA"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.statuses",
            "description": "Matches discovered clusters of specific statuses.\n\n - STATUS_UNSPECIFIED: The status of the cluster is unknown. May occur if a secured cluster\nis missing the metadata for a possible match.\n - STATUS_SECURED: The discovered cluster was matched with a secured cluster.\n - STATUS_UNSECURED: The discovered cluster was not matched with a secured cluster.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "STATUS_UNSPECIFIED",
                "STATUS_SECURED",
                "STATUS_UNSECURED"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.sourceIds",
            "description": "Matches discovered clusters of specific cloud source IDs.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "DiscoveredClustersService"
        ]
      }
    },
    "/v1/discovered-clusters": {
      "get": {
        "summary": "ListDiscoveredClusters returns the list of discovered clusters after filtered by requested fields.",
        "operationId": "DiscoveredClustersService_ListDiscoveredClusters",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListDiscoveredClustersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pagination.limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pagination.offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pagination.sortOption.field",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "pagination.sortOption.reversed",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "pagination.sortOption.aggregateBy.aggrFunc",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "UNSET",
              "COUNT",
              "MIN",
              "MAX"
            ],
            "default": "UNSET"
          },
          {
            "name": "pagination.sortOption.aggregateBy.distinct",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "filter.names",
            "description": "Matches discovered clusters of specific names.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.types",
            "description": "Matches discovered clusters of specific types.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "UNSPECIFIED",
                "AKS",
                "ARO",
                "EKS",
                "GKE",
                "OCP",
                "OSD",
                "ROSA"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.statuses",
            "description": "Matches discovered clusters of specific statuses.\n\n - STATUS_UNSPECIFIED: The status of the cluster is unknown. May occur if a secured cluster\nis missing the metadata for a possible match.\n - STATUS_SECURED: The discovered cluster was matched with a secured cluster.\n - STATUS_UNSECURED: The discovered cluster was not matched with a secured cluster.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "STATUS_UNSPECIFIED",
                "STATUS_SECURED",
                "STATUS_UNSECURED"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "filter.sourceIds",
            "description": "Matches discovered clusters of specific cloud source IDs.",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "DiscoveredClustersService"
        ]
      }
    },
    "/v1/discovered-clusters/{id}": {
      "get": {
        "summary": "GetDiscoveredCluster retrieves a discovered cluster by ID.",
        "operationId": "DiscoveredClustersService_GetDiscoveredCluster",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetDiscoveredClusterResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/googlerpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "DiscoveredClustersService"
        ]
      }
    }
  },
  "definitions": {
    "DiscoveredClusterCloudSource": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        }
      }
    },
    "DiscoveredClusterMetadata": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Represents a unique ID under which the cluster is registered with the\ncloud provider. Matches storage.ClusterMetadata.id for secured clusters."
        },
        "name": {
          "type": "string",
          "description": "Represents the name under which the cluster is registered with the\ncloud provider. Matches storage.ClusterMetadata.name for secured clusters."
        },
        "type": {
          "$ref": "#/definitions/DiscoveredClusterMetadataType",
          "description": "The cluster type. Matches storage.ClusterMetadata.type for secured clusters."
        },
        "providerType": {
          "$ref": "#/definitions/MetadataProviderType",
          "description": "The cloud provider type."
        },
        "region": {
          "type": "string",
          "description": "The region as reported by the cloud provider."
        },
        "firstDiscoveredAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp at which the cluster was first discovered by the cloud source."
        }
      }
    },
    "DiscoveredClusterMetadataType": {
      "type": "string",
      "enum": [
        "UNSPECIFIED",
        "AKS",
        "ARO",
        "EKS",
        "GKE",
        "OCP",
        "OSD",
        "ROSA"
      ],
      "default": "UNSPECIFIED"
    },
    "MetadataProviderType": {
      "type": "string",
      "enum": [
        "PROVIDER_TYPE_UNSPECIFIED",
        "PROVIDER_TYPE_AWS",
        "PROVIDER_TYPE_GCP",
        "PROVIDER_TYPE_AZURE"
      ],
      "default": "PROVIDER_TYPE_UNSPECIFIED"
    },
    "googlerpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "v1AggregateBy": {
      "type": "object",
      "properties": {
        "aggrFunc": {
          "$ref": "#/definitions/v1Aggregation"
        },
        "distinct": {
          "type": "boolean"
        }
      }
    },
    "v1Aggregation": {
      "type": "string",
      "enum": [
        "UNSET",
        "COUNT",
        "MIN",
        "MAX"
      ],
      "default": "UNSET"
    },
    "v1CountDiscoveredClustersResponse": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "v1DiscoveredCluster": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "UUIDv5 generated deterministically from the tuple (metadata.id, metadata.type, source.id)."
        },
        "metadata": {
          "$ref": "#/definitions/DiscoveredClusterMetadata"
        },
        "status": {
          "$ref": "#/definitions/v1DiscoveredClusterStatus",
          "description": "If an equivalent internal cluster exists, the discovered cluster is\nconsidered secured. If an equivalent secured cluster does not exist, the\nstatus of the discovered cluster is either unsecured or unknown, depending\non the provider details."
        },
        "source": {
          "$ref": "#/definitions/DiscoveredClusterCloudSource",
          "description": "The cloud source integration from which the cluster was discovered."
        }
      },
      "description": "DiscoveredCluster represents a cluster discovered from a cloud source."
    },
    "v1DiscoveredClusterStatus": {
      "type": "string",
      "enum": [
        "STATUS_UNSPECIFIED",
        "STATUS_SECURED",
        "STATUS_UNSECURED"
      ],
      "default": "STATUS_UNSPECIFIED",
      "description": " - STATUS_UNSPECIFIED: The status of the cluster is unknown. May occur if a secured cluster\nis missing the metadata for a possible match.\n - STATUS_SECURED: The discovered cluster was matched with a secured cluster.\n - STATUS_UNSECURED: The discovered cluster was not matched with a secured cluster."
    },
    "v1DiscoveredClustersFilter": {
      "type": "object",
      "properties": {
        "names": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Matches discovered clusters of specific names."
        },
        "types": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DiscoveredClusterMetadataType"
          },
          "description": "Matches discovered clusters of specific types."
        },
        "statuses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1DiscoveredClusterStatus"
          },
          "description": "Matches discovered clusters of specific statuses."
        },
        "sourceIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Matches discovered clusters of specific cloud source IDs."
        }
      }
    },
    "v1GetDiscoveredClusterResponse": {
      "type": "object",
      "properties": {
        "cluster": {
          "$ref": "#/definitions/v1DiscoveredCluster"
        }
      }
    },
    "v1ListDiscoveredClustersResponse": {
      "type": "object",
      "properties": {
        "clusters": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1DiscoveredCluster"
          }
        }
      }
    },
    "v1Pagination": {
      "type": "object",
      "properties": {
        "limit": {
          "type": "integer",
          "format": "int32"
        },
        "offset": {
          "type": "integer",
          "format": "int32"
        },
        "sortOption": {
          "$ref": "#/definitions/v1SortOption"
        },
        "sortOptions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1SortOption"
          },
          "description": "This field is under development. It is not supported on any REST APIs."
        }
      }
    },
    "v1SortOption": {
      "type": "object",
      "properties": {
        "field": {
          "type": "string"
        },
        "reversed": {
          "type": "boolean"
        },
        "aggregateBy": {
          "$ref": "#/definitions/v1AggregateBy",
          "description": "This field is under development. It is not supported on any REST APIs."
        }
      }
    }
  }
}
