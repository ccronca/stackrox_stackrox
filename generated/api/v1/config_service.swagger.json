{
  "swagger": "2.0",
  "info": {
    "title": "api/v1/config_service.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "ConfigService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/config": {
      "get": {
        "operationId": "ConfigService_GetConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/storageConfig"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ConfigService"
        ]
      },
      "put": {
        "operationId": "ConfigService_PutConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/storageConfig"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1PutConfigRequest"
            }
          }
        ],
        "tags": [
          "ConfigService"
        ]
      }
    },
    "/v1/config/private": {
      "get": {
        "operationId": "ConfigService_GetPrivateConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/storagePrivateConfig"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ConfigService"
        ]
      }
    },
    "/v1/config/private/exception/vulnerabilities": {
      "get": {
        "operationId": "ConfigService_GetVulnerabilityExceptionConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetVulnerabilityExceptionConfigResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ConfigService"
        ]
      },
      "put": {
        "operationId": "ConfigService_UpdateVulnerabilityExceptionConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1UpdateVulnerabilityExceptionConfigResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1UpdateVulnerabilityExceptionConfigRequest"
            }
          }
        ],
        "tags": [
          "ConfigService"
        ]
      }
    },
    "/v1/config/public": {
      "get": {
        "operationId": "ConfigService_GetPublicConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/storagePublicConfig"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ConfigService"
        ]
      }
    }
  },
  "definitions": {
    "BannerConfigSize": {
      "type": "string",
      "enum": [
        "UNSET",
        "SMALL",
        "MEDIUM",
        "LARGE"
      ],
      "default": "UNSET"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "storageAdministrationEventsConfig": {
      "type": "object",
      "properties": {
        "retentionDurationDays": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "storageAlertRetentionConfig": {
      "type": "object",
      "properties": {
        "resolvedDeployRetentionDurationDays": {
          "type": "integer",
          "format": "int32"
        },
        "deletedRuntimeRetentionDurationDays": {
          "type": "integer",
          "format": "int32",
          "description": "This runtime alert retention configuration takes precedence after `allRuntimeRetentionDurationDays`."
        },
        "allRuntimeRetentionDurationDays": {
          "type": "integer",
          "format": "int32",
          "description": "This runtime alert retention configuration has highest precedence. All runtime alerts, including attempted\nalerts and deleted deployment alerts, are deleted even if respective retention is longer."
        },
        "attemptedDeployRetentionDurationDays": {
          "type": "integer",
          "format": "int32"
        },
        "attemptedRuntimeRetentionDurationDays": {
          "type": "integer",
          "format": "int32",
          "description": "This runtime alert retention configuration has lowest precedence."
        }
      }
    },
    "storageBannerConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "text": {
          "type": "string"
        },
        "size": {
          "$ref": "#/definitions/BannerConfigSize"
        },
        "color": {
          "type": "string"
        },
        "backgroundColor": {
          "type": "string"
        }
      }
    },
    "storageConfig": {
      "type": "object",
      "properties": {
        "publicConfig": {
          "$ref": "#/definitions/storagePublicConfig"
        },
        "privateConfig": {
          "$ref": "#/definitions/storagePrivateConfig"
        }
      }
    },
    "storageDayOption": {
      "type": "object",
      "properties": {
        "numDays": {
          "type": "integer",
          "format": "int64"
        },
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "storageDecommissionedClusterRetentionConfig": {
      "type": "object",
      "properties": {
        "retentionDurationDays": {
          "type": "integer",
          "format": "int32"
        },
        "ignoreClusterLabels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "lastUpdated": {
          "type": "string",
          "format": "date-time"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "title": "next available tag: 5"
    },
    "storageLoginNotice": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "text": {
          "type": "string"
        }
      }
    },
    "storagePrivateConfig": {
      "type": "object",
      "properties": {
        "DEPRECATEDAlertRetentionDurationDays": {
          "type": "integer",
          "format": "int32",
          "title": "will be deprecated after migration is ready"
        },
        "alertConfig": {
          "$ref": "#/definitions/storageAlertRetentionConfig"
        },
        "imageRetentionDurationDays": {
          "type": "integer",
          "format": "int32"
        },
        "expiredVulnReqRetentionDurationDays": {
          "type": "integer",
          "format": "int32"
        },
        "decommissionedClusterRetention": {
          "$ref": "#/definitions/storageDecommissionedClusterRetentionConfig"
        },
        "reportRetentionConfig": {
          "$ref": "#/definitions/storageReportRetentionConfig"
        },
        "vulnerabilityExceptionConfig": {
          "$ref": "#/definitions/storageVulnerabilityExceptionConfig"
        },
        "administrationEventsConfig": {
          "$ref": "#/definitions/storageAdministrationEventsConfig"
        }
      },
      "title": "next available tag:9"
    },
    "storagePublicConfig": {
      "type": "object",
      "properties": {
        "loginNotice": {
          "$ref": "#/definitions/storageLoginNotice"
        },
        "header": {
          "$ref": "#/definitions/storageBannerConfig"
        },
        "footer": {
          "$ref": "#/definitions/storageBannerConfig"
        },
        "telemetry": {
          "$ref": "#/definitions/storageTelemetryConfiguration"
        }
      }
    },
    "storageReportRetentionConfig": {
      "type": "object",
      "properties": {
        "historyRetentionDurationDays": {
          "type": "integer",
          "format": "int64"
        },
        "downloadableReportRetentionDays": {
          "type": "integer",
          "format": "int64"
        },
        "downloadableReportGlobalRetentionBytes": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "next available tag: 4"
    },
    "storageTelemetryConfiguration": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "lastSetTime": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "storageVulnerabilityExceptionConfig": {
      "type": "object",
      "properties": {
        "expiryOptions": {
          "$ref": "#/definitions/storageVulnerabilityExceptionConfigExpiryOptions"
        }
      }
    },
    "storageVulnerabilityExceptionConfigExpiryOptions": {
      "type": "object",
      "properties": {
        "dayOptions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/storageDayOption"
          }
        },
        "fixableCveOptions": {
          "$ref": "#/definitions/storageVulnerabilityExceptionConfigFixableCVEOptions"
        },
        "customDate": {
          "type": "boolean"
        },
        "indefinite": {
          "type": "boolean"
        }
      }
    },
    "storageVulnerabilityExceptionConfigFixableCVEOptions": {
      "type": "object",
      "properties": {
        "allFixable": {
          "type": "boolean"
        },
        "anyFixable": {
          "type": "boolean"
        }
      }
    },
    "v1DayOption": {
      "type": "object",
      "properties": {
        "numDays": {
          "type": "integer",
          "format": "int64"
        },
        "enabled": {
          "type": "boolean"
        }
      }
    },
    "v1GetVulnerabilityExceptionConfigResponse": {
      "type": "object",
      "properties": {
        "config": {
          "$ref": "#/definitions/v1VulnerabilityExceptionConfig"
        }
      }
    },
    "v1PutConfigRequest": {
      "type": "object",
      "properties": {
        "config": {
          "$ref": "#/definitions/storageConfig"
        }
      }
    },
    "v1UpdateVulnerabilityExceptionConfigRequest": {
      "type": "object",
      "properties": {
        "config": {
          "$ref": "#/definitions/v1VulnerabilityExceptionConfig"
        }
      }
    },
    "v1UpdateVulnerabilityExceptionConfigResponse": {
      "type": "object",
      "properties": {
        "config": {
          "$ref": "#/definitions/v1VulnerabilityExceptionConfig"
        }
      }
    },
    "v1VulnerabilityExceptionConfig": {
      "type": "object",
      "properties": {
        "expiryOptions": {
          "$ref": "#/definitions/v1VulnerabilityExceptionConfigExpiryOptions"
        }
      }
    },
    "v1VulnerabilityExceptionConfigExpiryOptions": {
      "type": "object",
      "properties": {
        "dayOptions": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1DayOption"
          },
          "description": "This allows users to set expiry interval based on number of days."
        },
        "fixableCveOptions": {
          "$ref": "#/definitions/v1VulnerabilityExceptionConfigFixableCVEOptions",
          "description": "This allows users to set vulnerability request expiry based on the CVEs."
        },
        "customDate": {
          "type": "boolean",
          "description": "This option, if true, allows UI to show a custom date picker for setting expiry date."
        },
        "indefinite": {
          "type": "boolean"
        }
      }
    },
    "v1VulnerabilityExceptionConfigFixableCVEOptions": {
      "type": "object",
      "properties": {
        "allFixable": {
          "type": "boolean",
          "description": "This options allows users to expire the vulnerability deferral request if and only if **all** vulnerabilities\nin the requests become fixable."
        },
        "anyFixable": {
          "type": "boolean",
          "description": "This options allows users to expire the vulnerability deferral request if **any** vulnerability\nin the requests become fixable."
        }
      }
    }
  }
}
